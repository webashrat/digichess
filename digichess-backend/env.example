# ============================================
# DigiChess Backend Environment Configuration
# ============================================
# Copy this file to .env and update with your values
# cp env.example .env
#
# IMPORTANT: This file is configured for Docker Compose deployment
# docker-compose.yml automatically overrides DB_HOST, DB_PORT, and REDIS_URL
# for container-to-container communication

# ============================================
# Django Core Configuration
# ============================================
DJANGO_SECRET_KEY=django-insecure-y&)fapf4imah%769#0su46zuh=7s=l!7%rg6gbshp@@vb2xnec
DJANGO_DEBUG=True
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,*

# ============================================
# Database Configuration
# ============================================
# IMPORTANT: docker-compose.yml OVERRIDES these values for containers:
#   - DB_HOST is set to "postgres" (service name)
#   - DB_PORT is set to 5432 (container port)
#
# DB_NAME: Your database name
# DB_USER: PostgreSQL username
# DB_PASSWORD: PostgreSQL password
# DB_HOST: Set to "postgres" for Docker (service name), "localhost" for local dev
# DB_PORT: Container port (5432) - docker-compose sets this automatically
DB_NAME=cdc
DB_USER=postgres
DB_PASSWORD=12345
DB_HOST=postgres
DB_PORT=5432

# Host Port Mapping - allows accessing PostgreSQL from your host machine
# Change this if port 5433 is already in use on your system
DB_PORT_HOST=5433

# ============================================
# Redis Configuration
# ============================================
# IMPORTANT: docker-compose.yml OVERRIDES REDIS_URL for containers
# Containers use: redis://redis:6379/0 (service name "redis")
#
# REDIS_URL: Used by Django/Celery - docker-compose sets this automatically
REDIS_URL=redis://redis:6379/0

# Host Port Mapping - allows accessing Redis from your host machine
# Change this if port 6378 is already in use on your system
REDIS_PORT_HOST=6378

# ============================================
# Frontend & API URLs
# ============================================
FRONTEND_URL=http://localhost:5173
API_BASE_URL=http://localhost:8000

# ============================================
# CORS & CSRF Configuration
# ============================================
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
CSRF_TRUSTED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# ============================================
# Email Configuration
# ============================================
# For development, console backend prints emails to console
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# For production with SendGrid, use SMTP:
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=465
EMAIL_USE_TLS=False
EMAIL_USE_SSL=True
EMAIL_HOST_USER=apikey
EMAIL_HOST_PASSWORD=your_sendgrid_api_key_here
DEFAULT_FROM_EMAIL=noreply@yourdomain.com
SERVER_EMAIL=noreply@yourdomain.com
SENDGRID_API_KEY=your_sendgrid_api_key_here

# ============================================
# OTP Configuration
# ============================================
OTP_EXPIRY_MINUTES=10

# ============================================
# Chess Engine Configuration
# ============================================
# CRITICAL: These paths are INSIDE the Docker container, not on your host machine!
# Stockfish is compiled and installed at /usr/local/bin/stockfish in the container
# Do NOT use host paths like /home/rajanand/... - those won't work in Docker!
STOCKFISH_PATH=/usr/local/bin/stockfish
LC0_PATH=/usr/local/bin/lc0
MAIA_MODELS_DIR=/app/games/maia_models

# ============================================
# Docker Compose Port Configuration
# ============================================
# Host port mappings - allows accessing services from your host machine
# Change these if ports conflict with other services on your system
BACKEND_PORT=8000
DB_PORT_HOST=5433
REDIS_PORT_HOST=6378

# ============================================
# Important Notes:
# ============================================
# 1. Container-to-container communication uses service names (postgres, redis)
#    - Containers talk to each other via service names, not localhost
#    - docker-compose.yml automatically sets DB_HOST=postgres, DB_PORT=5432
#
# 2. Host access uses the mapped ports:
#    - PostgreSQL: localhost:5433 (maps to container port 5432)
#    - Redis: localhost:6378 (maps to container port 6379)
#    - Backend API: localhost:8000 (maps to container port 8000)
#
# 3. Stockfish path is INSIDE the container:
#    - Use /usr/local/bin/stockfish (container path)
#    - NOT /home/rajanand/... (host path)
#
# 4. Database values (DB_NAME, DB_USER, DB_PASSWORD) are used as-is
#    - docker-compose.yml reads these from .env and passes them to containers
#
# 5. Remove quotes from values:
#    - WRONG: DJANGO_SECRET_KEY='value'
#    - CORRECT: DJANGO_SECRET_KEY=value
